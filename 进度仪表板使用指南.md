# 📊 进度仪表板使用指南

## 功能概览

进度仪表板是一个**综合可视化平台**,帮助不同角色实时追踪目标完成情况:

- **GM/Manager**: 查看团队/全公司的目标进度,发现风险,激励表现优秀者
- **Employee**: 追踪个人目标进度,与部门平均对比,自我激励

---

## 访问路径

### 各角色入口

| 角色 | 访问路径 |
|------|----------|
| 员工 | `/employee/progress-dashboard` |
| 部门经理 | `/manager/progress-dashboard` |
| 总经理 | `/gm/progress-dashboard` |
| HR | `/hr/progress-dashboard` |

**使用方式**: 登录后,在左侧菜单中点击"进度仪表板"

---

## 功能详解

### 一、管理层视图（GM/Manager）

#### 1. 📈 总览标签页

**顶部卡片（4个关键指标）**:
- **总目标数**: 全公司/团队的目标总数
- **平均进度**: 所有目标的平均完成度（带进度条）
- **已完成**: 完成的目标数量（绿色高亮）
- **目标状态分布**: 饼图显示 已完成/进行中/未开始 比例

**部门进度总览**:
- 显示每个部门的:
  - 平均进度条
  - 完成情况（X/Y 完成）
  - 风险标签：
    - 🟢 **正常** (进度≥70%)
    - 🟡 **注意** (40%≤进度<70%)
    - 🔴 **风险** (进度<40%)
  - ⚠️ 滞后目标数量（进度<50%）

**目标完成度排行榜**:
- **Top 10**: 表现优秀的员工
  - 前3名金色高亮 🏆
  - 显示平均完成度、完成数量
- **待提升**: 需要关注的员工
  - 帮助管理层及时介入辅导

**季度进度趋势**:
- 折线图展示Q1→Q2→Q3→Q4的进度变化
- 帮助判断目标完成的节奏

#### 2. 🎯 我的进度标签页

管理层也可以查看自己的个人目标进度（同员工视图）

---

### 二、员工视图（Employee）

#### 1. 📊 个人总览（3张卡片）

- **我的目标**: 
  - 总数
  - 已完成 · 进行中
- **平均进度**:
  - 大字体显示进度百分比
  - 进度条可视化
- **部门对比**:
  - 与部门平均的差值
  - 🔺 超过部门平均（绿色）
  - 🔻 低于部门平均（红色）

#### 2. 📈 季度进度图

柱状图展示Q1/Q2/Q3/Q4各季度的平均进度,帮助员工:
- 查看季度完成节奏
- 发现滞后的季度,及时调整

#### 3. 📋 我的目标列表

显示所有个人年度目标:
- 目标名称 + 描述
- 状态标签（已完成/进行中等）
- 进度条 + 百分比

---

## 使用场景

### 场景1: GM月度经营会议

**操作步骤**:
1. 登录GM账号 → 进度仪表板
2. 查看"总览"标签:
   - 📊 全公司平均进度
   - 🏆 Top 10 表现优秀员工（会议表扬）
   - ⚠️ 部门风险提示（红色标签）
3. 点击"待提升"标签 → 查看落后员工
4. 下发指令给部门经理跟进

**价值**: 快速掌握全局,数据驱动决策

---

### 场景2: 部门经理周度团队会

**操作步骤**:
1. 登录Manager账号 → 进度仪表板
2. 查看"部门进度总览":
   - 发现哪些员工进度滞后
   - 查看风险目标数量
3. 点击"排行榜" → Top/Bottom员工名单
4. 一对一辅导落后员工

**价值**: 及时发现问题,针对性辅导

---

### 场景3: 员工自我管理

**操作步骤**:
1. 登录Employee账号 → 进度仪表板
2. 查看"个人总览":
   - 我的平均进度
   - 与部门对比（是否落后？）
3. 查看"季度进度图":
   - 发现哪个季度拖后腿
4. 查看"目标列表":
   - 点击进度<50%的目标
   - 加速行动

**价值**: 自我激励,主动改进

---

## 数据更新规则

### 实时更新
- 目标进度数据**实时刷新**（切换年份时自动重新加载）
- 数据源来自`objectives`表的`progress`字段

### 进度计算逻辑

**个人平均进度** = 所有个人目标的progress字段平均值  
**部门平均进度** = 部门所有目标的progress字段平均值  
**季度进度** = 该季度目标的progress字段平均值

---

## 年份筛选

右上角下拉框可切换年份（2024-2027），查看历史数据或未来计划。

---

## 图表说明

### 1. 饼图（目标状态分布）
- 🟢 **已完成**: progress ≥ 100%
- 🟡 **进行中**: 0% < progress < 100%
- 🔴 **未开始**: progress = 0%

### 2. 进度条（Progress Bar）
- 颜色自动映射进度值
- 悬停显示精确百分比

### 3. 柱状图（季度进度）
- X轴: Q1/Q2/Q3/Q4
- Y轴: 平均进度（%）
- 蓝色柱子表示各季度进度

### 4. 折线图（趋势）
- 显示Q1→Q2→Q3→Q4的进度变化趋势
- 帮助识别加速或放缓

---

## 常见问题

### Q1: 为什么数据为空？
**A**: 可能原因:
1. 该年份还没有创建目标
2. 当前角色没有权限查看（Manager只能看自己团队）
3. 切换到正确年份（右上角下拉框）

### Q2: 排行榜数据不准？
**A**: 排行榜基于**个人级别目标**的平均进度计算,确保:
1. 已为员工创建了individual级别的目标
2. 目标的progress字段已更新

### Q3: 部门经理看不到其他部门数据？
**A**: 这是权限设计，部门经理**只能看自己团队**的数据，GM可以看全公司。

### Q4: 季度进度图为空？
**A**: 季度进度基于目标的`quarter`字段（Q1/Q2/Q3/Q4），确保目标已设置quarter。

---

## 后续优化建议

### 短期
1. ✅ 添加数据导出功能（Excel/PDF）
2. ✅ 风险预警推送（进度<30%时邮件/通知）
3. ✅ 目标详情点击跳转

### 中期
4. ✅ 对比往年同期数据
5. ✅ 自定义仪表板布局
6. ✅ 移动端适配

### 长期
7. ✅ AI预测目标完成概率
8. ✅ 自动生成周报/月报

---

## 技术架构

### 后端API
- `GET /api/dashboard/overview` - 全局概览
- `GET /api/dashboard/my-progress` - 个人进度
- `GET /api/dashboard/rankings` - 排行榜
- `GET /api/dashboard/trends` - 趋势数据

### 前端组件
- **Recharts**: 图表库（柱状图/折线图/饼图）
- **shadcn/ui**: UI组件库（Card/Progress/Tabs等）
- **React**: 框架
- **TypeScript**: 类型安全

---

## 联系方式

如有问题或建议，请联系:
- **开发者**: 乖乖 AI助手 🐾
- **项目**: ATE绩效管理系统
- **文档生成**: 2026-02-12

---

**祝您使用愉快！📊✨**
