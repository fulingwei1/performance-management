# 绩效管理系统 - 手动测试记录
## 测试日期: 2026-02-13 14:50
## 测试人员: 乖乖 AI

---

## 发现的问题

### 🔴 严重问题

1. **登录接口要求 role 参数**
   - 现象: 前端登录时必须同时传username + password + role
   - 影响: 用户体验差 - 用户需要先知道自己的角色才能登录
   - 建议: 后端应该从数据库查询用户角色，而不是让用户输入
   - 位置: `backend/src/controllers/auth.controller.ts:13`
   
2. **登录频率限制过于严格**
   - 现象: 1分钟内多次登录会被拦截
   - 影响: 测试和开发体验差
   - 建议: 开发环境可以放宽限制

### 🟡 一般问题

3. **API响应格式不一致**
   - 现象: 
     - `/api/employees` 返回 `{success, data: []}`
     - 某些接口可能返回 `{success, message}`
   - 影响: 前端需要处理多种响应格式
   - 建议: 统一为 `{success, data, message}` 格式

### 🟢 待确认

4. **数据库数据完整性**
   - PostgreSQL: 174条员工记录 ✅
   - 绩效记录: 待确认数量
   - 战略目标: 待确认数量

---

## 后续测试计划

### 1. 功能测试
- [ ] 登录流程（各角色）
- [ ] 工作总结提交和查询
- [ ] 目标管理（创建、修改、审批）
- [ ] 同行评审（创建周期、分配、提交）
- [ ] 晋升申请（创建、审批流程）
- [ ] AI 功能（生成、优化）

### 2. P1 功能测试
- [ ] 申诉系统（创建、审批、拒绝）
- [ ] 评估结果发布
- [ ] 目标审批工作流

### 3. 自动化测试
- [ ] 任务生成
- [ ] 自动冻结
- [ ] 手动解冻

### 4. UI/UX 测试
- [ ] 前端登录页面
- [ ] 工作总结页面
- [ ] 冻结提示
- [ ] AI辅助界面

---

## 建议修复优先级

### P0（必须修复）
1. 登录接口去除 role 要求 - 后端自动查询

### P1（强烈建议）
2. 统一API响应格式
3. 放宽开发环境登录频率限制

### P2（优化建议）
4. 添加更完整的测试数据
5. 改进错误提示信息

