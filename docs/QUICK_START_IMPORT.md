# 数据导入操作指南

## 快速开始

### 第一步：准备您的数据

**组织架构示例（departments.csv）：**
```csv
部门编码,部门名称,上级部门编码,负责人编号,排序
SALES,销售部,,m010,10
SALES-01,销售一部,SALES,m010,1
SALES-02,销售二部,SALES,m011,2
SERVICE,客服部,,m012,11
```

**员工名册示例（employees.csv）：**
```csv
编号,姓名,部门,子部门,角色,级别,直属上级编号,密码
m010,销售经理,销售部,销售一部,manager,senior,,123456
m011,销售二部经理,销售部,销售二部,manager,senior,,123456
m012,客服经理,客服部,客服部,manager,senior,,123456
e100,张三,销售部,销售一部,employee,intermediate,m010,123456
e101,李四,销售部,销售一部,employee,junior,m010,123456
e102,王五,销售部,销售二部,employee,intermediate,m011,123456
e103,赵六,客服部,客服部,employee,intermediate,m012,123456
```

> ⚠️ **注意**：
> - 所有密码默认为 123456，员工首次登录后请修改
> - 角色只能是：employee(员工)、manager(经理)、gm(总经理)、hr(人力资源)
> - 级别只能是：senior(高级)、intermediate(中级)、junior(初级)、assistant(助理)
> - 经理的直属上级编号留空

### 第二步：使用管理界面导入

1. **启动系统**
   ```bash
   # 后端
   cd backend && npm run dev
   
   # 前端
   cd app && npm run dev
   ```

2. **登录系统**
   - 地址：http://localhost:5173
   - 账号：王HR / 123456 / HR

3. **导入组织架构**
   - 进入【组织架构】菜单
   - 在"部门管理"页面，点击"新增部门"
   - 按CSV中的层级逐级创建部门

4. **导入员工**
   - 进入【员工管理】菜单（或通过员工管理入口）
   - 点击"导入名册"
   - 选择您的employees.csv文件
   - 系统自动解析并导入

### 第三步：配置考核指标

1. 进入【指标库】菜单
2. 根据部门特点创建专用指标

**销售部门指标示例：**
| 指标名称 | 分类 | 权重 | 说明 |
|---------|------|------|------|
| 销售额完成率 | 业绩 | 50% | 月度目标完成情况 |
| 新客户开发数 | 业绩 | 20% | 每月新增客户数 |
| 客户满意度 | 业绩 | 20% | 客户评价平均分 |
| 工作主动性 | 态度 | 10% | 工作积极性和配合度 |

**客服部门指标示例：**
| 指标名称 | 分类 | 权重 | 说明 |
|---------|------|------|------|
| 响应时效 | 业绩 | 30% | 问题响应时间 |
| 客户满意度 | 业绩 | 40% | 服务满意度评分 |
| 问题解决率 | 业绩 | 20% | 一次解决率 |
| 工作态度 | 态度 | 10% | 服务态度评估 |

---

## 批量导入脚本

### 使用Node.js脚本快速导入

1. **进入脚本目录**
   ```bash
   cd backend/scripts
   ```

2. **导出数据模板**
   ```bash
   node bulk-import.js --template
   ```
   这会创建一个 `import-data-template.json` 文件

3. **编辑数据文件**
   复制模板并修改：
   ```bash
   cp import-data-template.json import-data.json
   ```
   用文本编辑器打开 `import-data.json`，修改为您自己的数据

4. **执行导入**
   ```bash
   node bulk-import.js
   ```

### JSON数据格式说明

```json
{
  "departments": [
    {
      "id": "唯一标识",
      "name": "部门名称",
      "code": "部门编码",
      "parentId": "上级部门ID（可选）",
      "sortOrder": "排序序号"
    }
  ],
  "positions": [
    {
      "name": "岗位名称",
      "code": "岗位编码",
      "departmentId": "所属部门ID",
      "level": "职级(senior/intermediate/junior/assistant)",
      "category": "类别(technical/management/support)"
    }
  ],
  "employees": [
    {
      "id": "员工编号",
      "name": "姓名",
      "department": "部门名称",
      "subDepartment": "子部门名称",
      "role": "角色(employee/manager/gm/hr)",
      "level": "级别",
      "managerId": "直属上级编号（员工必填）"
    }
  ],
  "metrics": [
    {
      "name": "指标名称",
      "code": "指标编码",
      "category": "分类(performance/ability/attitude/bonus/penalty)",
      "type": "类型(quantitative/qualitative/composite)",
      "weight": "权重(0-100)",
      "scoringCriteria": [
        {
          "level": "级别(L1-L5)",
          "score": "分数",
          "description": "描述"
        }
      ]
    }
  ]
}
```

---

## 当前考核体系

### 已有考核部门（47人）

| 部门 | 人数 | 经理 | 状态 |
|------|------|------|------|
| 测试部 | 12人 | 于振华 | ✅ 已启用 |
| 机械部 | 12人 | 张丙波 | ✅ 已启用 |
| PLC | 12人 | 王俊 | ✅ 已启用 |
| 技术开发部-软件组 | 5人 | 黎佩锋 | ✅ 已启用 |
| 技术开发部-电子硬件组 | 4人 | 梁柱 | ✅ 已启用 |
| 售前技术部 | 2人 | 周定炫 | ✅ 已启用 |

### 当前通用考核指标（适用于技术部门）

| 指标 | 权重 | 说明 |
|------|------|------|
| 任务完成量及完成情况 | 40% | 承担任务的数量和质量 |
| 主动性态度与纪律 | 30% | 工作积极性和纪律遵守 |
| 项目反馈情况 | 20% | 项目中的配合度 |
| 质量意识与改进 | 10% | 工作质量和持续改进 |

### 可新增的考核部门

系统已预留以下部门结构，可快速启用：
- 项目管理部
- 客服部
- 销售部

---

## 常见问题

### Q1: 导入时提示"部门不存在"
**解决**：先导入部门数据，再导入员工数据。员工的department和subDepartment必须与系统中的部门名称完全匹配。

### Q2: 员工无法登录
**解决**：检查：
1. 员工角色是否正确（employee/manager/gm/hr）
2. 密码是否为123456
3. 员工ID是否唯一

### Q3: 如何修改已导入的数据
**解决**：
- 通过管理界面编辑
- 或使用API更新：
  ```bash
  curl -X PUT http://localhost:3001/api/employees/e100 \
    -H "Authorization: Bearer TOKEN" \
    -d '{"department":"新部门"}'
  ```

### Q4: 考核指标如何针对不同部门设置不同权重
**解决**：
1. 创建岗位模板（指标库→岗位模板）
2. 为不同岗位分配不同的指标和权重
3. 员工考核时自动套用对应岗位的模板

### Q5: 如何启用新的考核方式（如360度）
**解决**：
1. 进入【考核周期管理】
2. 创建新周期时，在备注中说明启用360度
3. 经理在【360度评分管理】中分配互评关系
4. 员工在【360度评分】页面进行互评

---

## 下一步建议

1. **导入您的实际数据**：按照上述步骤导入公司真实的人员数据
2. **配置部门专属指标**：为销售、客服等非技术部门创建专门的考核指标
3. **设置考核周期**：创建2025年的月度/季度考核周期
4. **测试考核流程**：用少量员工测试完整的考核流程
5. **培训使用人员**：为经理和员工提供系统使用培训

如有其他问题，请查看 `DATA_IMPORT_GUIDE.md` 详细文档。
