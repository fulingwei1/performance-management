# HR数据导入中心 - 使用说明

## ✅ 功能已就绪

HR数据导入中心已成功实现，现在可以通过简单的CSV文件快速完成：
- 组织架构批量导入
- 员工名册批量导入  
- 考核关系自动建立

---

## 📂 已创建的文件清单

### 核心文件
```
app/src/pages/HR/HRDataImportCenter.tsx      # 数据导入中心主页面
app/src/services/api.ts                       # 添加 employeeApi.create
app/src/App.tsx                               # 添加 /hr/import 路由
app/src/components/layout/Sidebar.tsx         # 添加数据导入菜单
```

### 模板文件
```
templates/组织架构导入模板.csv
/templates/员工名册导入模板.csv
```

### 文档文件
```
docs/HR_IMPORT_MANUAL.md                      # 详细操作手册
docs/HR_IMPORT_QUICK_GUIDE.md                 # 快速参考卡片
docs/HR_IMPORT_IMPLEMENTATION_SUMMARY.md      # 实现总结
```

---

## 🚀 如何使用

### 1. 启动系统
```bash
# 后端
cd backend && npm run dev

# 前端
cd app && npm run dev
```

### 2. 访问导入中心
1. 打开浏览器访问 http://localhost:5173
2. 使用HR账号登录（默认：王HR / 123456）
3. 点击左侧菜单【数据导入】

### 3. 执行导入（4步向导）

#### 步骤1：下载模板
- 点击下载"组织架构导入模板.csv"
- 点击下载"员工名册导入模板.csv"

#### 步骤2：填写数据

**组织架构CSV示例：**
```csv
部门编码,部门名称,上级部门编码,部门类型,排序
CEO,总经办,,company,1
HR,人力资源部,CEO,department,2
TECH,工程技术中心,CEO,department,3
TEST,测试部,TECH,subDepartment,1
MECH,机械部,TECH,subDepartment,2
```

**员工名册CSV示例：**
```csv
员工编号,姓名,部门编码,岗位,角色,职级,直属上级编号
M001,张经理,TEST,测试部经理,manager,senior,
E001,张三,TEST,测试工程师,employee,intermediate,M001
E002,李四,TEST,测试工程师,employee,junior,M001
```

#### 步骤3：上传文件
- 先上传组织架构文件
- 再上传员工名册文件
- 系统自动验证数据

#### 步骤4：确认导入
- 预览待导入数据
- 查看统计信息
- 点击确认导入

---

## 🎯 考核关系建立说明

**核心机制：**
通过员工名册中的"直属上级编号"字段自动建立考核关系

**示例：**
```
员工编号: E001, 姓名: 张三, 直属上级编号: M001
员工编号: M001, 姓名: 张经理, 直属上级编号: (空)
```

**建立的考核关系：**
- 张经理 考核 张三
- 张三 的考核人是 张经理

---

## 📊 导入前准备清单

### 必须准备的数据
- [ ] 部门列表（编码、名称、层级关系）
- [ ] 员工列表（编号、姓名、部门）
- [ ] 经理信息（需要先有经理，才能指定下属）
- [ ] 考核关系（每个员工的上级编号）

### 数据格式要求
- 文件格式：CSV（逗号分隔）
- 文件编码：UTF-8（支持中文）
- 日期格式：YYYY-MM-DD
- 必填字段不能留空

---

## 🔍 验证导入成功

导入完成后检查：

1. **查看组织架构**
   - 菜单【组织架构】
   - 确认部门层级正确

2. **查看员工列表**
   - 菜单【员工管理】
   - 确认员工信息完整

3. **查看考核关系**
   - 在导入中心点击"查看考核关系图"
   - 确认上下级关系链正确

4. **测试登录**
   - 使用员工编号 + 密码123456登录
   - 确认可以正常进入系统

---

## ⚠️ 重要提醒

### 导入顺序（关键！）
**必须先导入组织架构，再导入员工名册！**

原因：员工名册中的"部门编码"必须引用已存在的部门

### 经理必须先导入
**必须先导入所有经理，再导入普通员工！**

原因：员工的"直属上级编号"必须引用已存在的经理

### 默认密码
所有新导入员工的默认密码为：**123456**
首次登录后必须修改密码

---

## 📈 支持的导入规模

- ✅ 单次导入部门：无限制
- ✅ 单次导入员工：建议不超过500人
- ✅ 支持分批导入：可以多次导入，已存在的数据会自动跳过

---

## 🛠️ 常见问题快速解决

### Q: 导入时提示"部门已存在"
**A:** 这是正常的，系统会跳过已存在的部门继续导入其他数据

### Q: 员工导入成功但无法登录
**A:** 检查员工角色是否正确（employee/manager/gm/hr），默认密码是123456

### Q: 考核关系没建立
**A:** 检查员工CSV中的"直属上级编号"是否正确，确保该编号的经理已导入

### Q: 中文乱码
**A:** 保存CSV时选择UTF-8编码格式

---

## 📞 需要帮助？

### 查看详细文档
- `docs/HR_IMPORT_MANUAL.md` - 完整操作手册
- `docs/HR_IMPORT_QUICK_GUIDE.md` - 快速参考

### 联系支持
- 技术问题：查看浏览器控制台错误信息
- 数据问题：提供CSV文件和错误截图
- 功能咨询：参考实现总结文档

---

## 🎉 恭喜！

您现在拥有完整的HR数据导入解决方案：
- ✅ 四步向导式导入流程
- ✅ 可视化组织架构展示
- ✅ 自动建立考核关系
- ✅ 数据验证和错误提示
- ✅ 考核关系图可视化

**下一步建议：**
1. 准备您的组织架构和员工数据
2. 按照模板格式整理成CSV文件
3. 使用导入中心完成批量导入
4. 验证导入结果并配置考核周期

祝您使用愉快！
